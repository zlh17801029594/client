(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7df3c7ee"],{3211:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"接口描述"}},[a("span",[t._v(t._s(t.api.label))])]),t._v(" "),a("el-form-item",{attrs:{label:"接口uri"}},[a("span",[t._v(t._s(t.api.uri))])]),t._v(" "),a("el-form-item",{attrs:{label:"请求方法"}},[a("span",[t._v(t._s(t.api.method))])]),t._v(" "),a("el-form-item",{attrs:{label:"请求参数"}},[a("span",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.api.otherInfo.parameters,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"参数名",prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{label:"参数位置",prop:"in"}}),t._v(" "),a("el-table-column",{attrs:{label:"参数描述",prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否必须",prop:"required",formatter:t.booleanFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"参数类型",prop:"type"}}),t._v(" "),a("el-table-column",{attrs:{label:"是否可以为空白字符串",prop:"allowEmptyValue",formatter:t.booleanFormat}}),t._v(" "),a("el-table-column",{attrs:{label:"参数样例",prop:"example"}})],1)],1)]),t._v(" "),a("el-form-item",{attrs:{label:"返回结果样例"}},[a("pre",{domProps:{innerHTML:t._s(t.syntaxHighlight(t.api.otherInfo.result))}})]),t._v(" "),a("el-form-item",{attrs:{label:"接收参数方式"}},[a("span",[t._v(t._s(t.api.otherInfo.consumes))])]),t._v(" "),a("el-form-item",{attrs:{label:"返回结果方式"}},[a("span",[t._v(t._s(t.api.otherInfo.produces))])]),t._v(" "),a("el-form-item",{attrs:{label:"响应码"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.api.otherInfo.responses,stripe:"",border:""}},[a("el-table-column",{attrs:{label:"响应码",prop:"code"}}),t._v(" "),a("el-table-column",{attrs:{label:"描述",prop:"description"}})],1)],1)],1)},s=[],r=(a("a481"),a("c5f6"),a("fe70")),o={name:"apiInfo",props:{apiId:{type:Number}},data:function(){return{api:{}}},watch:{apiId:function(){this.serviceDetails()}},created:function(){this.serviceDetails()},methods:{serviceDetails:function(){var t=this;Object(r["d"])(this.apiId).then(function(e){t.api=e.data})},booleanFormat:function(t,e,a){var n="";return n=a?"是":"否",n},syntaxHighlight:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,void 0,2)),t=t.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">"),t.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var e="number";return/^"/.test(t)?e=/:$/.test(t)?"key":"string":/true|false/.test(t)?e="boolean":/null/.test(t)&&(e="null"),'<span class="'+e+'">'+t+"</span>"})}}},i=o,l=(a("94de"),a("2877")),u=Object(l["a"])(i,n,s,!1,null,null,null);e["a"]=u.exports},"396e":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"c",function(){return r}),a.d(e,"d",function(){return o}),a.d(e,"b",function(){return i});var n=a("b775");function s(t){return Object(n["a"])({url:"/apply/create",method:"post",data:t})}function r(){return Object(n["a"])({url:"/apply/all",method:"get"})}function o(t){return Object(n["a"])({url:"/apply/pass/".concat(t),method:"post"})}function i(t){return Object(n["a"])({url:"/apply/deny/".concat(t),method:"post"})}},8747:function(t,e,a){},"8cf8":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",[a("el-header",[a("p",[t._v("提示：\n      "),t.status.blue?a("span",[a("span",{style:{color:t.setColor(t.status.blue.code)}},[t._v("蓝色")]),t._v(":"+t._s(t.status.blue.message)+"、\n      ")]):t._e(),t._v(" "),t.status.green?a("span",[a("span",{style:{color:t.setColor(t.status.green.code)}},[t._v("绿色")]),t._v(":"+t._s(t.status.green.message)+"、\n      ")]):t._e(),t._v(" "),t.status.orange?a("span",[a("span",{style:{color:t.setColor(t.status.orange.code)}},[t._v("橙色")]),t._v(":"+t._s(t.status.orange.message)+"、\n      ")]):t._e(),t._v(" "),t.status.gray?a("span",[a("span",{style:{color:t.setColor(t.status.gray.code)}},[t._v("灰色")]),t._v(":"+t._s(t.status.gray.message)+"、\n      ")]):t._e(),t._v(" "),t.status.red?a("span",[a("span",{style:{color:t.setColor(t.status.red.code)}},[t._v("红色")]),t._v(":"+t._s(t.status.red.message)+"\n      ")]):t._e()])]),t._v(" "),a("el-main",[a("div",{staticClass:"tree-container"},[a("el-tree",{ref:"tree",staticClass:"tree",attrs:{indent:0,data:t.treeData,"show-checkbox":t.checkbox,"node-key":"id","highlight-current":"","default-expand-all":"","expand-on-click-node":!0},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.node,s=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{style:{color:t.setColor(s.status)}},[t._v(t._s(n.label))]),t._v(" "),a("span")])}}])})],1)])],1)},s=[],r=(a("ac6a"),a("fe70")),o={name:"Tree",props:{filterArr:{type:Array,default:function(){return[]}},checkbox:{type:Boolean},status:{type:Object,default:function(){return{red:{code:-1,message:"未通过"},gray:{code:0,message:"待审核"},orange:{code:1,message:"已停用"},green:{code:2,message:"已启用"}}}}},data:function(){return{data:[]}},computed:{treeData:function(){var t=this.data,e=this.filterArr,a=[];if(e){var n=e.map(function(t){return t["id"]});t.forEach(function(t){if(t.children){var s=t.children.some(function(t){return-1!==n.indexOf(t.id)});if(s){var r={id:t.id,label:t.label,children:[]};a.push(r),t.children.forEach(function(t){if(-1!==n.indexOf(t.id)){var a;e.forEach(function(e){e.id===t.id&&(a=e["status"])});var s={id:t.id,label:t.label,status:a};r.children.push(s)}})}}else if(-1!==n.indexOf(t.id)){var o;e.forEach(function(e){e.id===t.id&&(o=e["status"])});var i={id:t.id,label:t.label,status:o};a.push(i)}})}return console.log(this.filterArr),console.log(a),a}},watch:{filterArr:function(t,e){console.log("oldval",e),console.log("newval",t),console.log("checkdedKeys",this.$refs.tree.getCheckedKeys(!0,!1))}},beforeCreate:function(){console.log("beforeCreate")},created:function(){var t=this;Object(r["b"])().then(function(e){t.data=e.data}),console.log("created")},beforeMount:function(){console.log("beforeMount")},mounted:function(){var t=this.filterArr.map(function(t){return t["id"]});this.$refs.tree.setCheckedKeys(t),console.log("mounted")},beforeUpdate:function(){console.log("beforeUpdate")},updated:function(){var t=this.filterArr.map(function(t){return t["id"]});this.$refs.tree.setCheckedKeys(t),console.log("updated")},beforeDestroy:function(){console.log("beforeDestroy")},destroyed:function(){console.log("destoryed")},methods:{getIds:function(){return this.$refs.tree.getCheckedKeys(!0,!1)},getOwnerIds:function(){var t=this.$refs.tree.getCheckedKeys(!0,!1);return t?this.filterArr.filter(function(e){return-1!==t.indexOf(e.id)}).map(function(t){return t.ownerId}):[]},setColor:function(t){return 0===t?"#409EFF":1===t?"#E6A23C":2===t?"#67C23A":-1===t?"#909399":-2===t?"#F56C6C":void 0}}},i=o,l=(a("d0b9"),a("2877")),u=Object(l["a"])(i,n,s,!1,null,null,null);e["a"]=u.exports},"94de":function(t,e,a){"use strict";var n=a("97fb"),s=a.n(n);s.a},"97fb":function(t,e,a){},a60d:function(t,e,a){"use strict";var n=a("ef79"),s=a.n(n);s.a},d0b9:function(t,e,a){"use strict";var n=a("8747"),s=a.n(n);s.a},d9e5:function(t,e,a){"use strict";a.d(e,"b",function(){return s}),a.d(e,"d",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return i});var n=a("b775");function s(){return Object(n["a"])({url:"/user/all",method:"get"})}function r(t){return Object(n["a"])({url:"/user_api/on",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/user_api/off",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/user_api/del",method:"post",data:t})}},e4b2:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"span-method":t.arraySpanMethod,"row-key":"id","row-class-name":t.tableRowClassName,border:""}},[a("el-table-column",{attrs:{type:"index",index:1}}),t._v(" "),a("el-table-column",{attrs:{prop:"label",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"类型",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",[t._v(t._s(e.row.children?"申请":"接口"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"接口url"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.info(e.row)}}},[t._v(t._s(e.row.uri))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"applyTime",label:"申请时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"expireTime",label:"到期时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",filters:[{text:t.status.disabled.message,value:t.status.disabled.code},{text:t.status.expire.message,value:t.status.expire.code},{text:t.status.approve.message,value:t.status.approve.code},{text:t.status.deny.message,value:t.status.deny.code},{text:t.status.pass.message,value:t.status.pass.code}],"filter-method":t.filterStatus,"filter-placement":"bottom-end",width:"280"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.children?a("span",[a("el-tag",{attrs:{type:t.tag_type(e.row),effect:"dark"}},[t._v(t._s(t.show(e.row)))])],1):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"失效原因"}}),t._v(" "),t.hasPerm()?a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.commonShow(e.row,0)?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.commonAction(e.row,0)}}},[t._v(t._s(t.action.approve))]):t._e()]}}],null,!1,1003223891)}):t._e()],1),t._v(" "),a("el-dialog",{ref:"dialog",attrs:{visible:t.dialog,"before-close":t.closeDialog,center:!0},on:{"update:visible":function(e){t.dialog=e}}},[a("apiInfo",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],attrs:{apiId:t.apiId}})],1)],1)},s=[],r=(a("ac6a"),a("db72")),o=a("8cf8"),i=a("3211"),l=(a("d9e5"),a("fe70"),a("396e")),u=a("2f62"),c={components:{tree:o["a"],apiInfo:i["a"]},data:function(){return{tableData:[],filterArr:[],dialog:!1,showTree:!1,showInfo:!1,viewStatus:0,checkbox:!0,status:{disabled:{code:-2,message:"已失效"},expire:{code:-1,message:"已过期"},approve:{code:0,message:"待审批"},deny:{code:1,message:"未通过"},pass:{code:2,message:"已通过"}},action:{look:"查看",remove:"移除",approve:"审批",pass:"通过",deny:"拒绝"},text:"",apiId:0}},inject:["reload"],computed:Object(r["a"])({},Object(u["b"])(["roles"])),created:function(){var t=this;Object(l["c"])().then(function(e){t.tableData=e.data})},mounted:function(){},methods:{hasPerm:function(){return this.roles.some(function(t){return-1!==["ADMIN","SUPER_ADMIN"].indexOf(t)})},commonAction:function(t,e){var a=this;t.children&&e===this.status.approve.code&&this.$confirm(this.action.approve,"提示",{distinguishCancelAndClose:!0,confirmButtonText:this.action.pass,cancelButtonText:this.action.deny,type:"info",center:"true"}).then(function(e){Object(l["d"])(t.id).then(function(e){a.$message({type:"success",message:"操作成功"}),t.status=a.status.pass.code}).catch(function(t){450===t.code&&a.reload()})}).catch(function(e){"cancel"===e&&Object(l["b"])(t.id).then(function(e){a.$message({type:"success",message:"操作成功"}),t.status=a.status.deny.code}).catch(function(t){450===t.code&&a.reload()})})},findItem:function(t,e,a){var n=this;t instanceof Array&&t.forEach(function(t){t.children?n.findItem(t.children,e,a):e(t)&&a.push(t)})},filterStatus:function(t,e){return e.children?e.children.some(function(e){return e.status===t}):e.status===t},arraySpanMethod:function(t){var e=t.row,a=t.column;t.rowIndex,t.columnIndex;if(e.children){if("接口url"===a.label)return[0,0];if("申请时间"===a.label)return[1,2]}else{if("接口url"===a.label)return[1,3];if("申请时间"===a.label)return[0,0];if("到期时间"===a.label)return[0,0]}},closeDialog:function(t){t()},dialogBuSh:function(t){return t===this.viewStatus},commonShow:function(t,e){return!!t.children&&t.status===e},show:function(t){if(t.children){if(t.status===this.status.disabled.code)return this.status.disabled.message;if(t.status===this.status.expire.code)return this.status.expire.message;if(t.status===this.status.approve.code)return this.status.approve.message;if(t.status===this.status.deny.code)return this.status.deny.message;if(t.status===this.status.pass.code)return this.status.pass.message}},tag_type:function(t){return t.status===this.status.approve.code?"primary":t.status===this.status.pass.code?"success":t.status===this.status.deny.code?"warning":t.status===this.status.expire.code?"info":t.status===this.status.disabled.code?"danger":void 0},tableRowClassName:function(t){t.row,t.rowIndex;return""},info:function(t){this.dialog=!0,this.apiId=t.id,this.showTree=!1,this.showInfo=!0}}},d=c,f=(a("a60d"),a("2877")),p=Object(f["a"])(d,n,s,!1,null,null,null);e["default"]=p.exports},ef79:function(t,e,a){},fe70:function(t,e,a){"use strict";a.d(e,"i",function(){return s}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return o}),a.d(e,"c",function(){return i}),a.d(e,"e",function(){return l}),a.d(e,"a",function(){return u}),a.d(e,"g",function(){return c}),a.d(e,"f",function(){return d}),a.d(e,"h",function(){return f});var n=a("b775");function s(t){return Object(n["a"])({url:"/api/update",method:"post",params:{msUrl:t}})}function r(){return Object(n["a"])({url:"/api/all",method:"get"})}function o(t){return Object(n["a"])({url:"/api/".concat(t),method:"get"})}function i(){return Object(n["a"])({url:"/api",method:"get"})}function l(t){return Object(n["a"])({url:"/api/join",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/api/del",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/api/on",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/api/off",method:"post",data:t})}function f(t,e){return Object(n["a"])({url:"/api/sensitive/".concat(t),method:"post",data:e})}}}]);